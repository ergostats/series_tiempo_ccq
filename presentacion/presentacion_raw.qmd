---
title: "Proyecci√≥n de las ventas 2023"
author: "Centro de Investigaci√≥n Estad√≠stica ERGOSTATS"
date: "Diciembre 15, 2022"
format: 
  revealjs:
    css: scss/theme_ergostats.css
    slide-number: true
    logo: scss/logo.png
editor: visual
title-slide-attributes: 
  data-background-image: scss/grafismo.png
  data-background-size: 100%
---

## Bienvenidos üññ

‚è≤Ô∏è El taller va a tener una duraci√≥n de 45 minutos

ü™ê Repositorio con el material de este taller:

<https://github.com/ergostats/series_tiempo_ccq>

> Tambien tienes una copia del repositorio en la carpeta compartida de OneDrive

Ya que est√°s por ah√≠ puedes dejarnos tu ‚≠ê

Si necesitas ayuda levanta tu mano (interacciones de Zoom) üñêÔ∏è

## Algunas reglas generales

-   ‚ùî No dudes en preguntar, la forma m√°s chevere de aprender es en conjunto

-   üë®‚Äçüíª Si no tienes computador no te preocupes, el taller quedar√° gravado y lo podr√°s seguir en casa.

-   üìπ Para acceder al material audiovisual. Envianos un correo a:

    -   Alex Baja√±a instructor del taller ([alexvbr\@ergostats.org](https://ergostats.github.io/series_tiempo_ccq/alexvbr@ergostats.org) )

    -   Fernando Arevalo organizador ([fdarevalo\@lacamaradequito.com](https://ergostats.github.io/series_tiempo_ccq/fdarevalo@lacamaradequito.com))

## Alex Baja√±a

::: columns
::: {.column width="50%"}
![](img/alex_photo.jpg)
:::

::: {.column width="50%"}
-   Tengo 30 a√±os

-   7 de experiencia

-   Actualmente soy investigador para el Banco Mundial y fundador del Centro de Inestigaci√≥n Estad√≠stica ERGOSTATS

-   Twitter: \@AlexBajaa5

-   Correo: alexvbr\@ergostats.org
:::
:::

## Agenda

|               |                                                                      |
|------------------|------------------------------------------------------|
| 18:00 - 18:10 | Introducci√≥n y presentaci√≥n del taller, los datos y las herramientas |
| 18:11 - 18:20 | An√°lisis exploratorio y formatos de fecha                            |
| 18:21 - 18:30 | An√°lisis gr√°fico con {tsibble}                                       |
| 18:31 - 18:45 | Porn√≥sticos con {fabble}                                             |

: Las preguntas se responderan a lo largo del taller

## Recursos üìñ

::: columns
::: {.column width="50%"}
### Libros

-   [R para ciencia de datos, Hadley Wickham (versi√≥n en espa√±ol)](https://es.r4ds.hadley.nz/)

-   [Forcasting: Principles and practice 3rd Edition, Rob Hyndman y George Athanasopoulus](https://otexts.com/fpp3/)

-   [Tidy time series forecasting with fable, by tidyverts](https://tidyverts.github.io/tidy-forecasting-principles/index.html)
:::

::: {.column width="50%"}
### Librerias de R:

-   [tsibble](https://tsibble.tidyverts.org/)

-   [fable](https://fable.tidyverts.org/)

-   [lubridate](https://lubridate.tidyverse.org/)

-   [tidyverse](https://www.tidyverse.org/)

-   [feasts](https://cran.r-project.org/web/packages/feasts/index.html)
:::
:::

## El flujo de trabajo `tidy`

![](images/paste-A51C3D77.png)

## `tidy` series de tiempo

![](images/paste-DE5C879A.png)

## Ambiente de trabajo üñ•Ô∏è

Esta presentaci√≥n se realiz√≥ con la versi√≥n de R:

```{r}

R.version
```

> Para este taller necesitamos cualquier versi√≥n desde la R 4.2.0

## Ambiente de trabajo

Librer√≠as:

```{r echo=TRUE}

# Para manejar las tablas

library(tidyverse)

# Para manejar las fechas: 
library(lubridate)

# Herramientas para manejar series de tiempo:
library(tsibble)

# Herramientas para pron√≥stico:
library(fable)

# Herramientas para extraer car√°cteristicas de las series de tiempo:
library(feasts)

```

# Nuestros datos: üóÑÔ∏è

Para el desarrollo de nuestro taller hemos hecho uso de la herramienta [SAIKU-SRI](https://srienlinea.sri.gob.ec/saiku-ui/) con las siguientes consideraciones:

-   Cubo de declaraci√≥nes 104

-   Variables categ√≥ricas:

    -   A√±o y mes fiscal

    -   Tipo de contribuyente (Determina si son ventas privadas o de otros contribuyentes)

    -   Calsificaci√≥n de actividad econ√≥mica CIIU a 6 d√≠gitos

## Nuestros datos: (cont.) üóÑÔ∏è

-   Variables n√∫mericas

    -   Rubros de ventas locales y de activos fijos gravadas con el 12% de IVA

    -   Rubros de ventas locales y de activos fijos con derecho y sin derecho a cr√©dito tributario gravadas con 0% de IVA

-   Filtramos los datos para el sector de comercio (Familia de actividades G)

-   Periodo de an√°lisis: 2011-2022

-   Descarga en formato `.csv`

## Pre-procesamiento: ‚ö†Ô∏è

Descargados estos datos realizamos algunas transformaciones y se gener√≥ un diccionario. Los datos y diccionario los encontrar√°s en la carpeta `data/`.

Transformaciones:

-   Agrupaci√≥n de las ventas gravadas con 12% y 0%

-   Calculo de las ventas totales

-   Inclusi√≥n de la descripci√≥n de las actividades econ√≥micas

## ¬øComo vamos a trabajar?

![](images/paste-27FE02A1.png)

> ¬øTe es familar este diagrama?

## Algunos conceptos de las series de tiempo:

### Tendencia üìà

Una tendencia existe cuando hay un aumento o disminuci√≥n a largo plazo en los datos. No tiene que ser lineal. A veces nos referiremos a una tendencia como "cambio de direcci√≥n", cuando podr√≠a pasar de una tendencia creciente a una tendencia decreciente.

## Algunos conceptos de las series de tiempo:

### Tendencia estacional üìÖ

Un patr√≥n estacional ocurre cuando una serie de tiempo se ve afectada por factores estacionales como la √©poca del a√±o o el d√≠a de la semana. La estacionalidad es siempre de un per√≠odo fijo y conocido. (Junio y diciembre son los meses de repunte en el gr√°fico mensual)

## Algunos conceptos de las series de tiempo:

### C√≠clo ‚è≤Ô∏è

Un ciclo ocurre cuando los datos exhiben subidas y bajadas que no tienen una frecuencia fija. Estas fluctuaciones generalmente se deben a las condiciones econ√≥micas y, a menudo, est√°n relacionadas con el "ciclo econ√≥mico". La duraci√≥n de estas fluctuaciones suele ser de al menos 2 a√±os.

> Para extraer los componentes de una serie de tiempo usamos `components()`

## Autocorrelaci√≥n üë∂üßì

Nos ayuda a identificar patrones estacionales:

![](images/paste-E675B25B.png)

> Para calcular la funci√≥n de autocorrelaci√≥n usamos `ACF()`

## M√©todos sencillos de estimaci√≥n üíØ

::: columns
::: {.column width="50%"}
### Media

![](images/paste-718C18FF.png)

## Naive (el ingenuo)

![](images/paste-B5D71D01.png)
:::

::: {.column width="50%"}
### Naive estacional

![](images/paste-3A0F36DC.png)

### Regresi√≥n lineal para series de tiempo

![](images/paste-E8CB8092.png)
:::
:::

## Agradecimientos ‚õëÔ∏è

-   Primero que a nadie a todos los presentes por haberse unido a este taller

-   A la C√°mara de Comercio de Quito por la organizaci√≥n y difusi√≥n

-   A quienes hacemos ERGOSTATS por el material

-   Por √∫ltimo y no menos importante, a la comunidad de R que nos provee de estas fant√°sticas librerias
